apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: ironic-standalone-operator-system

resources:
- https://github.com/metal3-io/ironic-standalone-operator/releases/download/v0.5.2/install.yaml

generatorOptions:
  disableNameSuffixHash: true

configMapGenerator:
- name: ironic-operator-config
  literals:
  - IPA_BASEURI=http://192.168.222.1

patches:
- target:
    kind: Deployment
    name: ironic-standalone-operator-controller-manager
  patch: |-
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      name: ironic-standalone-operator
    spec:
      template:
        spec:
          containers:
            - name: manager
              envFrom:
                - configMapRef:
                    name: ironic-operator-config
